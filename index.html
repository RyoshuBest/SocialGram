<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socialgram</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }
        .hide { display: none !important; }
        .gradient-text { background: linear-gradient(to right, #9333ea, #db2777, #ea580c); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .story-gradient { background: linear-gradient(to top right, #fbbf24, #ef4444, #a855f7); }
    </style>
</head>
<body class="bg-gray-50">

<!-- Login/Register Page -->
<div id="authPage" class="min-h-screen bg-gradient-to-br from-purple-100 via-pink-50 to-orange-50 flex items-center justify-center p-4">
    <div class="max-w-md w-full">
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold gradient-text mb-2">Socialgram</h1>
            <p class="text-gray-600">Condividi i tuoi momenti con il mondo</p>
        </div>

        <!-- Login Form -->
        <div id="loginForm" class="bg-white rounded-2xl shadow-xl p-8">
            <h2 class="text-2xl font-bold text-center mb-6">Accedi</h2>
            <div class="mb-4">
                <input type="text" id="loginUsername" placeholder="Username o email" class="w-full px-4 py-3 border border-gray-300 rounded-lg outline-none focus:border-pink-500 transition">
            </div>
            <div class="mb-6">
                <input type="password" id="loginPassword" placeholder="Password" class="w-full px-4 py-3 border border-gray-300 rounded-lg outline-none focus:border-pink-500 transition">
            </div>
            <button onclick="handleLogin()" class="w-full bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition">Accedi</button>
            
            <div class="text-center mt-4">
                <a href="#" class="text-sm text-blue-600 hover:underline">Password dimenticata?</a>
            </div>
            
            <div class="flex items-center my-6">
                <div class="flex-1 border-t border-gray-300"></div>
                <span class="px-4 text-gray-500 text-sm">OPPURE</span>
                <div class="flex-1 border-t border-gray-300"></div>
            </div>
            
            <div class="text-center">
                <p class="text-sm text-gray-600">Non hai un account? <button onclick="showRegister()" class="text-blue-600 font-semibold hover:underline">Registrati</button></p>
            </div>
        </div>

        <!-- Register Form -->
        <div id="registerForm" class="bg-white rounded-2xl shadow-xl p-8 hide">
            <h2 class="text-2xl font-bold text-center mb-6">Registrati</h2>
            <div class="mb-4">
                <input type="email" id="registerEmail" placeholder="Email" class="w-full px-4 py-3 border border-gray-300 rounded-lg outline-none focus:border-pink-500 transition">
            </div>
            <div class="mb-4">
                <input type="text" id="registerUsername" placeholder="Nome utente" class="w-full px-4 py-3 border border-gray-300 rounded-lg outline-none focus:border-pink-500 transition">
            </div>
            <div class="mb-6">
                <input type="password" id="registerPassword" placeholder="Password" class="w-full px-4 py-3 border border-gray-300 rounded-lg outline-none focus:border-pink-500 transition">
            </div>
            <button onclick="handleRegister()" class="w-full bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition">Registrati</button>
            
            <p class="text-xs text-gray-500 text-center mt-4">Registrandoti, accetti i nostri Termini, l'Informativa sui dati e la Politica sui cookie.</p>
            
            <div class="flex items-center my-6">
                <div class="flex-1 border-t border-gray-300"></div>
                <span class="px-4 text-gray-500 text-sm">OPPURE</span>
                <div class="flex-1 border-t border-gray-300"></div>
            </div>
            
            <div class="text-center">
                <p class="text-sm text-gray-600">Hai gi√† un account? <button onclick="showLogin()" class="text-blue-600 font-semibold hover:underline">Accedi</button></p>
            </div>
        </div>

        <div class="text-center mt-6">
            <p class="text-sm text-gray-600 mb-3">Scarica l'app.</p>
            <div class="flex justify-center gap-2">
                <div class="px-4 py-2 bg-black text-white rounded-lg text-xs font-semibold cursor-pointer hover:bg-gray-800 transition">App Store</div>
                <div class="px-4 py-2 bg-black text-white rounded-lg text-xs font-semibold cursor-pointer hover:bg-gray-800 transition">Google Play</div>
            </div>
        </div>
    </div>
</div>

<!-- Main App -->
<div id="mainApp" class="hide">
    <!-- Top Bar -->
    <div class="bg-white border-b fixed top-0 left-0 right-0 z-40">
        <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
            <h1 class="text-2xl font-bold gradient-text">Socialgram</h1>
            <div class="flex items-center gap-4">
                <button class="p-2 hover:bg-gray-100 rounded-full">‚ù§Ô∏è</button>
                <button class="p-2 hover:bg-gray-100 rounded-full">‚úâÔ∏è</button>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="pt-16 pb-20">
        <!-- Home Tab -->
        <div id="homeTab" class="max-w-2xl mx-auto">
            <!-- Stories -->
            <div class="bg-white border-b p-4 mb-4 overflow-x-auto">
                <div id="storiesContainer" class="flex gap-4"></div>
            </div>

            <!-- Posts -->
            <div id="postsContainer"></div>
        </div>

        <!-- Profile Tab -->
        <div id="profileTab" class="max-w-4xl mx-auto hide">
            <div class="bg-white p-6">
                <div class="flex items-center gap-8 mb-6">
                    <img id="profileAvatar" src="" alt="Avatar" class="w-32 h-32 rounded-full">
                    <div class="flex-1">
                        <div class="flex items-center gap-4 mb-4">
                            <h2 id="profileUsername" class="text-2xl"></h2>
                            <button class="px-6 py-1.5 bg-gray-200 rounded-lg font-semibold text-sm hover:bg-gray-300">Modifica profilo</button>
                        </div>
                        <div class="flex gap-8 mb-4">
                            <div><span id="profilePosts" class="font-semibold">0</span> post</div>
                            <div><span class="font-semibold">1823</span> follower</div>
                            <div><span class="font-semibold">245</span> seguiti</div>
                        </div>
                        <p id="profileBio" class="text-sm"></p>
                    </div>
                </div>
                <div class="border-t flex justify-center gap-12">
                    <button class="py-3 border-t-2 border-black font-semibold text-sm">POST</button>
                    <button class="py-3 text-gray-400 font-semibold text-sm">SALVATI</button>
                    <button class="py-3 text-gray-400 font-semibold text-sm">TAG</button>
                </div>
            </div>
            <div id="profileGrid" class="grid grid-cols-3 gap-1"></div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bg-white border-t fixed bottom-0 left-0 right-0 z-40">
        <div class="max-w-6xl mx-auto px-4 py-2 flex items-center justify-around">
            <button onclick="switchTab('home')" id="homeBtn" class="p-2 text-black">üè†</button>
            <button class="p-2 text-gray-400">üîç</button>
            <button onclick="showNewPostModal()" class="p-2 text-gray-400">‚ûï</button>
            <button class="p-2 text-gray-400">üì∑</button>
            <button onclick="switchTab('profile')" id="profileBtn" class="p-2 text-gray-400">üë§</button>
        </div>
    </div>

    <!-- New Post Modal -->
    <div id="newPostModal" class="hide fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-auto">
            <div class="flex items-center justify-between p-4 border-b">
                <button onclick="hideNewPostModal()">‚ùå</button>
                <h3 class="font-semibold">Crea nuovo post</h3>
                <button onclick="createPost()" class="text-blue-500 font-semibold">‚úì</button>
            </div>
            <div class="p-6">
                <div class="mb-4">
                    <label class="block text-sm font-semibold mb-2">URL Immagine</label>
                    <input type="text" id="newPostImage" placeholder="https://esempio.com/immagine.jpg" class="w-full border rounded-lg px-4 py-2 outline-none focus:border-blue-500">
                </div>
                <div id="imagePreview" class="mb-4 hide"></div>
                <div class="mb-4">
                    <label class="block text-sm font-semibold mb-2">Didascalia</label>
                    <textarea id="newPostCaption" placeholder="Scrivi una didascalia..." class="w-full border rounded-lg px-4 py-2 outline-none focus:border-blue-500 resize-none" rows="4"></textarea>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
let currentUser = { username: 'utente', avatar: '', bio: 'Fotografo | Milano üì∏' };
let posts = [
    { id: 1, userId: 2, username: 'travel_enthusiast', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah', image: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=800&fit=crop', likes: 342, caption: 'Panorama mozzafiato sulle montagne üèîÔ∏è #nature #travel', comments: 23, timestamp: '2 ore fa', liked: false, saved: false },
    { id: 2, userId: 3, username: 'food_lover_italy', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Giovanni', image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=800&h=800&fit=crop', likes: 521, caption: 'La pizza perfetta esiste! üçï‚ù§Ô∏è #foodporn #pizza', comments: 45, timestamp: '5 ore fa', liked: false, saved: false },
    { id: 3, userId: 4, username: 'art_gallery_milano', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Lucia', image: 'https://images.unsplash.com/photo-1547891654-e66ed7ebb968?w=800&h=800&fit=crop', likes: 189, caption: 'Arte moderna in mostra questo weekend üé® #art #culture', comments: 12, timestamp: '1 giorno fa', liked: true, saved: false }
];
let stories = [
    { id: 1, username: 'tuo_story', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Mario', isUser: true },
    { id: 2, username: 'travel_enthusiast', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah' },
    { id: 3, username: 'food_lover_italy', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Giovanni' },
    { id: 4, username: 'art_gallery_milano', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Lucia' },
    { id: 5, username: 'sports_fan', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Marco' }
];

function showRegister() {
    document.getElementById('loginForm').classList.add('hide');
    document.getElementById('registerForm').classList.remove('hide');
}

function showLogin() {
    document.getElementById('registerForm').classList.add('hide');
    document.getElementById('loginForm').classList.remove('hide');
}

function handleLogin() {
    const username = document.getElementById('loginUsername').value;
    const password = document.getElementById('loginPassword').value;
    if (username && password) {
        currentUser.username = username;
        currentUser.avatar = `https://api.dicebear.com/7.x/avataaars/svg?seed=${username}`;
        document.getElementById('authPage').classList.add('hide');
        document.getElementById('mainApp').classList.remove('hide');
        renderApp();
    } else {
        alert('Inserisci username e password per accedere');
    }
}

function handleRegister() {
    const username = document.getElementById('registerUsername').value;
    const email = document.getElementById('registerEmail').value;
    const password = document.getElementById('registerPassword').value;
    if (username && email && password) {
        currentUser.username = username;
        currentUser.avatar = `https://api.dicebear.com/7.x/avataaars/svg?seed=${username}`;
        document.getElementById('authPage').classList.add('hide');
        document.getElementById('mainApp').classList.remove('hide');
        renderApp();
    } else {
        alert('Compila tutti i campi per registrarti');
    }
}

function renderApp() {
    renderStories();
    renderPosts();
    renderProfile();
}

function renderStories() {
    const container = document.getElementById('storiesContainer');
    container.innerHTML = stories.map(story => `
        <div class="flex flex-col items-center gap-1 min-w-fit cursor-pointer">
            <div class="w-16 h-16 rounded-full p-0.5 story-gradient">
                <div class="w-full h-full bg-white rounded-full p-0.5">
                    <img src="${story.avatar}" alt="${story.username}" class="w-full h-full rounded-full object-cover">
                </div>
            </div>
            <span class="text-xs truncate w-16 text-center">${story.isUser ? 'La tua storia' : story.username}</span>
        </div>
    `).join('');
}

function renderPosts() {
    const container = document.getElementById('postsContainer');
    container.innerHTML = posts.map(post => `
        <div class="bg-white border-b mb-4">
            <div class="flex items-center justify-between p-3">
                <div class="flex items-center gap-3">
                    <img src="${post.avatar}" alt="${post.username}" class="w-10 h-10 rounded-full">
                    <div>
                        <p class="font-semibold text-sm">${post.username}</p>
                        <p class="text-xs text-gray-500">${post.timestamp}</p>
                    </div>
                </div>
                <button class="p-2">‚ãØ</button>
            </div>
            <img src="${post.image}" alt="Post" class="w-full aspect-square object-cover">
            <div class="p-3">
                <div class="flex items-center justify-between mb-2">
                    <div class="flex gap-4">
                        <button onclick="toggleLike(${post.id})" class="text-2xl">${post.liked ? '‚ù§Ô∏è' : 'ü§ç'}</button>
                        <button class="text-2xl">üí¨</button>
                        <button class="text-2xl">‚úàÔ∏è</button>
                    </div>
                    <button onclick="toggleSave(${post.id})" class="text-2xl">${post.saved ? 'üîñ' : 'üìë'}</button>
                </div>
                <p class="font-semibold text-sm mb-1">${post.likes.toLocaleString()} Mi piace</p>
                <p class="text-sm"><span class="font-semibold mr-2">${post.username}</span>${post.caption}</p>
                ${post.comments > 0 ? `<button class="text-sm text-gray-500 mt-1">Visualizza tutti i ${post.comments} commenti</button>` : ''}
                <div class="flex items-center gap-2 mt-2 pt-2 border-t">
                    <input type="text" placeholder="Aggiungi un commento..." class="flex-1 outline-none text-sm">
                </div>
            </div>
        </div>
    `).join('');
}

function renderProfile() {
    document.getElementById('profileAvatar').src = currentUser.avatar;
    document.getElementById('profileUsername').textContent = currentUser.username;
    document.getElementById('profileBio').textContent = currentUser.bio;
    document.getElementById('profilePosts').textContent = posts.filter(p => p.username === currentUser.username).length;
    
    const userPosts = posts.filter(p => p.username === currentUser.username);
    document.getElementById('profileGrid').innerHTML = userPosts.map(post => `
        <div class="aspect-square relative group cursor-pointer">
            <img src="${post.image}" alt="Post" class="w-full h-full object-cover">
        </div>
    `).join('');
}

function toggleLike(postId) {
    const post = posts.find(p => p.id === postId);
    post.liked = !post.liked;
    post.likes += post.liked ? 1 : -1;
    renderPosts();
}

function toggleSave(postId) {
    const post = posts.find(p => p.id === postId);
    post.saved = !post.saved;
    renderPosts();
}

function switchTab(tab) {
    if (tab === 'home') {
        document.getElementById('homeTab').classList.remove('hide');
        document.getElementById('profileTab').classList.add('hide');
        document.getElementById('homeBtn').classList.remove('text-gray-400');
        document.getElementById('homeBtn').classList.add('text-black');
        document.getElementById('profileBtn').classList.add('text-gray-400');
        document.getElementById('profileBtn').classList.remove('text-black');
    } else {
        document.getElementById('homeTab').classList.add('hide');
        document.getElementById('profileTab').classList.remove('hide');
        document.getElementById('profileBtn').classList.remove('text-gray-400');
        document.getElementById('profileBtn').classList.add('text-black');
        document.getElementById('homeBtn').classList.add('text-gray-400');
        document.getElementById('homeBtn').classList.remove('text-black');
    }
}

function showNewPostModal() {
    document.getElementById('newPostModal').classList.remove('hide');
}

function hideNewPostModal() {
    document.getElementById('newPostModal').classList.add('hide');
    document.getElementById('newPostImage').value = '';
    document.getElementById('newPostCaption').value = '';
}

function createPost() {
    const image = document.getElementById('newPostImage').value;
    const caption = document.getElementById('newPostCaption').value;
    if (image && caption) {
        posts.unshift({
            id: posts.length + 1,
            userId: 1,
            username: currentUser.username,
            avatar: currentUser.avatar,
            image: image,
            likes: 0,
            caption: caption,
            comments: 0,
            timestamp: 'Adesso',
            liked: false,
            saved: false
        });
        hideNewPostModal();
        renderPosts();
        renderProfile();
    }
}

document.getElementById('newPostImage').addEventListener('input', function(e) {
    const url = e.target.value;
    const preview = document.getElementById('imagePreview');
    if (url) {
        preview.innerHTML = `<img src="${url}" alt="Preview" class="w-full rounded-lg max-h-96 object-cover">`;
        preview.classList.remove('hide');
    } else {
        preview.classList.add('hide');
    }
});

// Infinite scroll
window.addEventListener('scroll', function() {
    if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 500) {
        loadMorePosts();
    }
});

function loadMorePosts() {
    const images = [
        'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=800&h=800&fit=crop',
        'https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=800&h=800&fit=crop',
        'https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=800&h=800&fit=crop'
    ];
    const usernames = ['fashion_lover', 'fitness_pro', 'gaming_master'];
    const captions = ['Che giornata! ‚òÄÔ∏è #amazing', 'Vivere il momento üåü', 'Nuove avventure üöÄ'];
    
    for (let i = 0; i < 3; i++) {
        const username = usernames[Math.floor(Math.random() * usernames.length)];
        posts.push({
            id: posts.length + 1,
            userId: posts.length + 100,
            username: username,
            avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${username}`,
            image: images[Math.floor(Math.random() * images.length)],
            likes: Math.floor(Math.random() * 1000),
            caption: captions[Math.floor(Math.random() * captions.length)],
            comments: Math.floor(Math.random() * 100),
            timestamp: `${Math.floor(Math.random() * 24)} ore fa`,
            liked: false,
            saved: false
        });
    }
    renderPosts();
}
</script>

</body>
</html>
